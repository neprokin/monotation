# üîî –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã haptic –Ω–∞ Apple Watch

> **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ï–®–ï–ù–û (2026-01-08)  
> **–†–µ—à–µ–Ω–∏–µ**: Smart Alarm (WKExtendedRuntimeSession)  
> **–î–æ–∫—É–º–µ–Ω—Ç**: –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã, –∞—Ä—Ö–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

**–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –°–º. [ARCHITECTURE_CURRENT.md](ARCHITECTURE_CURRENT.md)

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–¶–µ–ª—å**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —É–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –º–µ–¥–∏—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –≤–∏–±—Ä–∞—Ü–∏—é, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —ç–∫—Ä–∞–Ω Apple Watch –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (AOD/wrist-down —Ä–µ–∂–∏–º).

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: ‚úÖ **–†–ï–®–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2026-01-08). Smart Alarm ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ Watch. –í–∞—Ä–∏–∞–Ω—Ç A (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∫–∞–∑ CompletionView –ø—Ä–∏ "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å") —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## üèÜ –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï: Smart Alarm

**WKExtendedRuntimeSession (Smart Alarm)** ‚Äî —ç—Ç–æ **—Å–∏—Å—Ç–µ–º–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º "–±—É–¥–∏–ª—å–Ω–∏–∫–∞"**, –∫–æ—Ç–æ—Ä—ã–π:
1. –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Timer)
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `notifyUser(hapticType:repeatHandler:)` –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è haptic
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π UI —Å –∫–Ω–æ–ø–∫–æ–π Stop
4. –†–∞–±–æ—Ç–∞–µ—Ç **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–¥—ë–∂–Ω–æ** –≤ AOD/wrist-down

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏**: –°–º. [ARCHITECTURE_CURRENT.md](ARCHITECTURE_CURRENT.md)

---

## üìö –ò–°–¢–û–†–ò–Ø –†–ï–®–ï–ù–ò–Ø (ARCHIVE)

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–ø—ã—Ç–∫–∏ —Ä–µ—à–µ–Ω–∏—è —á–µ—Ä–µ–∑ Local Notifications + Timer, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞–ª–∏, –Ω–æ –±—ã–ª–∏ "—á—ë—Ä–Ω—ã–º —è—â–∏–∫–æ–º" –∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã.

### –≠—Ç–∞–ø 1: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
**–ü–æ–¥—Ö–æ–¥**: –ü—Ä–æ—Å—Ç–æ–π haptic –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–∞  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —ç–∫—Ä–∞–Ω–µ

### –≠—Ç–∞–ø 2: Repeating Haptic Timer
**–ü–æ–¥—Ö–æ–¥**: –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –≤–∏–±—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É —á–µ—Ä–µ–∑ Timer  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚ùå –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ 1-2 —Å–µ–∫—É–Ω–¥—ã, –ø–æ—Ç–æ–º –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

### –≠—Ç–∞–ø 3: Local Notification –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
**–ü–æ–¥—Ö–æ–¥**: –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å Local Notification –≤ –º–æ–º–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–µ–¥–∏—Ç–∞—Ü–∏–∏  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚ùå –ù–µ–Ω–∞–¥—ë–∂–Ω–æ ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –≤ background

### –≠—Ç–∞–ø 4: "–î–≤—É—Ö–∫–æ–Ω—Ç—É—Ä–Ω–∞—è" —Å—Ö–µ–º–∞
**–ü–æ–¥—Ö–æ–¥**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ó–ê–†–ê–ù–ï–ï –Ω–∞ –≤—Ä–µ–º—è T_end  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–æ–ª—å–∫–æ 2 –≤–∏–±—Ä–∞—Ü–∏–∏, –ø–æ—Ç–æ–º —Ç–∏—à–∏–Ω–∞)

### –≠—Ç–∞–ø 5: NotificationDelegate + –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
**–ü–æ–¥—Ö–æ–¥**: UNUserNotificationCenterDelegate + 3 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚ö†Ô∏è –†–∞–±–æ—Ç–∞–ª–æ, –Ω–æ "—á—ë—Ä–Ω—ã–π —è—â–∏–∫"

### ‚úÖ –§–ò–ù–ê–õ: Smart Alarm (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—è)
**–ü–æ–¥—Ö–æ–¥**: WKExtendedRuntimeSession —Å WKBackgroundModes = alarm  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **–ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û –ù–ê–î–Å–ñ–ù–û**

---

**–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏ –¥–µ—Ç–∞–ª–∏**: –°–º. –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –≤ –∏—Å—Ç–æ—Ä–∏–∏ git.

**–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: [ARCHITECTURE_CURRENT.md](ARCHITECTURE_CURRENT.md)
